<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main</title>
</head>
<body>
    <div id ="main_div">
        <h1 id="vorld">Hello vorld!</h1>
        <p id="hello">Hello you !</p>
        <p id="node_machin">Yadi yadiya diya!</p>
        <button id="btn" onclick="clicker()"></button>
        <button id="goBtn" onclick="getImg()">GOPHER</button>
        <img id="gopherImg" alt=" click to toggle the image">
    </div>
</body>
</html>


<script>
    btn.innerText = "Ping"
    toggleImage = false

    async function getImg(){
        await window.exposed.gopher() // Load a new local image
        gopherImg.src = (toggleImage == false)
            ? await window.exposed.localRessources + "/random.jpg"
            : ""
        toggleImage = !toggleImage
    }

    function writeText(elementId, exists, parentId, text){
        if (typeof elementId == "function"){
            elementId()
            return
        }
        let elmt = exists 
            ? document.getElementById(elementId) 
            : document.createElement("p")
        elmt.id = elementId
        elmt.innerText = text

        if (!exists){
            let parent = document.getElementById(parentId)
            parent.append(elmt)
        }
    }

    counter = 0

    async function clicker(){
        let res = await window.exposed.ping()
        /*
        if (!document.getElementById("pong")){
            let pong = document.createElement("p")
            pong.id = "pong"
            pong.innerText = res
            main_div.append(pong)
            return
        }
        */
        const stopit = () => vorld.innerText = "STOP IT"
        koolStuff = [
            ["pong", false, "main_div", "pong bitch"],
            ["booya", false, "main_div", "booya bitch"],
            ["node_machin", true, "main_div", "electron is lame"],
            ["btn", true, "main_div", "pong !"],
            ["hello", true, "main_div", "Geniuses admire simplicity, idiots admire complexity."],
            ["if_you_give", false, "main_div", "If you give an idiot something so complex and clusterfucked that he can't comprehend it, he's gonna think it's genius."],
            ["signed", false, "main_div", "- The react team, 2023"]
        ]

        writeText(...koolStuff[counter] ?? [stopit])
        counter++
    }


</script>